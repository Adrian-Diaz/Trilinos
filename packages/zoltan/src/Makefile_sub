#====================================================================
# ------------------------
# | CVS File Information |
# ------------------------
#
# $RCSfile$
#
# $Author$
#
# $Date$
#
# $Revision$
#
# $Name$
#====================================================================

#
# Dynamic Load Balance Library Makefile for machine dependent directories
#

ifndef DCC
DCC=$(CC)
endif

LINT.c=$(LINT) $(LINTFLAGS) $(CFLAGS)

DEPS=-M

ifndef LINT
include $(OBJ_FILES:.o=.d)
endif

%.o:	%.c
	@echo "Compiling $<..."
	@$(CC) $(DEFS) -c $<
%.d:	%.c
	@echo "(Re)Building dependency for $<..."
	@$(SHELL) -ec '$(DCC) $(DEPS) $(DEFS) $< | sed '\''s/$*.o/& $@/g'\'' > $@'

$(LIB_NAME):	$(OBJ_FILES) $(OBJ_FILES:.o=.d)
		@echo "creating library..."
		@$(AR) $(LIB_NAME) $(OBJ_FILES)
		@$(RANLIB) $(LIB_NAME)

$(LINT_TARGET):	$(SRC_FILES)
		@echo "Generating lint file for library..."
		$(LINT.c) $^ -y -o $(TARGET)

$(LINT):	$(SRC_MAIN) $(LINT_TARGET)
		@echo "running lint..."
		$(LINT.c) $< $(LINT_TARGET)
